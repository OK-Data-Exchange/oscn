packages:
  yum:
    jq: []

files:

  "/usr/local/bin/pd_import_recent.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      echo "Cron import recent for "`date` >> /tmp/pd_import_recent.log
      cd /var/app/current/
      bundle exec rake pd:import_recent >> /tmp/pd_import_recent.log
      # Now run commands that should run on only 1 instance.
      echo "Completed running recent for "`date` >> /tmp/pd_import_recent.log

  "/etc/cron.d/cron_example":
    mode: "000644"
    owner: root
    group: root
    content: |
      50 19 * * * root /usr/local/bin/pd_import_recent.sh

commands:
  rm_old_cron:
    command: "rm -fr /etc/cron.d/cron_example.bak"
    ignoreErrors: true